
## Экзамен

Для выполнения экзаменационной работы Вам потребуется загрузить базу данных *firtree.csv* -- результаты выдуманного опроса покупателей на елочном базаре. Предполагается, что посетителям елочного базара предлагалось оценить елки разных видов -- определить, насколько хороша елка, и назвать сумму, которую они готовы за нее отдать.

Переменные в базе данных:

* gender -- пол респондента

* ftype -- тип елки, которую оценивал респондент

* height -- высота елки в сантиметрах

* expenses -- сумма (в рублях), которую респондент готов отдать за елку

* score -- оценка, которую респондент поставил елке (1 -- очень плохо, 5 -- отлично)

* wish -- ответ на вопрос "Хотели бы, чтобы Вам подарили такую елку?" (да, нет)

**Задание 1: векторы**

Выберите из базы данных столбец *height*, сохраните его в вектор *h*.  Выберите из базы данных столбец *score*, сохраните его в вектор *s*.

Ответы на вопросы этого задания должны быть даны на основе векторов *h* и *s* -- обращаться к самой базе данных нельзя!

1. Сколько в базе данных елок, высота которых больше 70 см, но меньше 120 см? Приведите код и напишите ответ в виде комментария.

2. Сколько в базе данных елок, которые покупатели оценили на 2 или 3? Приведите код и напишите ответ в виде комментария.

3. Алиса считает, что "самые правильные елки" -- елки высоты 124 см, 132 см и 167 см. Дан вектор f <- c(124, 132, 167). Используя вектор *f*, выведите на экран индексы "самых правильных елок". Внимание: задействовать при этом вектор *f* -- обязательное условие.

4. Определите, скольким елкам были присвоены оценки 1, 2, 3, 4, 5 (ожидается единая выдача R для всех оценок).


**Задание 2. Базы данных и dplyr.**

1. Добавьте в базу данных (с помощью dplyr):

     * столбец *height.m* -- высота елки в метрах

     * столбец *rating*, содержащий следующие значения в зависимости от значений *score*:

     | score | rating          |
     |-------|-----------------|
     | 5     | excellent       |
     | 4     | good            |
     | 3     | normal          |
     | 2     | bad             |
     | 1     | really firtree? |

2. Отфильтруйте (с помощью dplyr) строки в базе: выберите все елки выше 1 метра и оставьте в базе только их.

3. Сколько переменных и наблюдений в базе данных, с учетом преобразований в пунктах 1--2? 

4. Определите тип переменных *rating*, *gender*, *height.m*. Определите шкалы этих переменных (содержательный вопрос, R не нужен, напишите комментарием).

5. Есть ли в базе данных пропущенные значения? Сколько строк, содержащих пропущенные значения, в этой базе данных?

6. Постройте графики, которые позволят вам определить паттерны пропущенных значений. Наблюдается ли какая-то закономерность в пропущенных значениях или пропуски носят "случайный" характер? Напишите ответ в виде комментария.

**Задание 3. Описательные статистики и dplyr.**

*Используйте dplyr для ответа на вопросы этого задания.*

1. Сколько в базе данных елок, получивших оценки "excellent", "good", "normal", "bad", "really firtree"? 

2. У какого вида елок медианная оценка, поставленная покупателями, выше? 

3. В среднем, кто больше склонен предлагать б**о**льшую сумму за елки: мужчины или женщины?

4. Выведите на экран первые 8 строк в базе данных, отсортированных по возрастанию по переменной *height*. А теперь последние 8.

5. Какая мера центральной тенденции подходит для описания показателя *wish*? Определите ее значение. Проинтерпретируйте полученное значение (укажите, что оно описывает с содержательной точки зрения).

**Задание 4. Визуализация и анализ данных.**

1. Постройте гистограмму (необязательно с ggplot2) для показателя *height*. Наложите на нее график плотности нормального распределения с соответсвующим параметрами.

2. Постройте график, который показывал бы связь между переменными *type* и *wish*. Проверьте с помощью соответствующего критерия, есть ли связь между видом елки и желанием респондента получить ее в подарок. Сделайте статистический и содержательный вывод.

3. Постройте диаграмму рассения (scatterplot) для визуализации связи между высотой елки и ее оценкой. Выберите подходящий коэффициент корреляции, посчитайте его для этой пары переменных. Проверьте его значимость. Сделайте вывод.

**Задание 5. Графики с ggplot2.**

Постройте ящики с усами для переменной *height* по группам (по типу елок): один ящик с усами для каждой группы, причем графики должны быть в одном окне. Не забудьте заголовок для графика. Поменяйте цвета (можно на разные оттенки зеленых).


**Задание 6. Условия, циклы и функции.**

1. Напишите функцию, которая принимает на вход (просто, не запрашивая у пользователя с клавиатуры) вектор из значений "male" и "female" и возвращает вектор из 0 и 1, где 0 -- "female", 1 -- "male". 

2. Напишите функцию, которая запрашивает у пользователя число (дату) и 

* выводит на экран сообщение "До Нового года осталось K дней", где К -- число дней до Нового года

* не только выводит сообщение на экран, но и возвращает его 

Пользователь вводит только декабрьские числа в таком формате: "23 декабря".








