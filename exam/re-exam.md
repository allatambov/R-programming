
## Экзамен

Для выполнения экзаменационной работы Вам потребуется загрузить базу данных *holidays.csv* -- результаты выдуманного опроса респондентов после новогодних праздников. 

Переменные в базе данных:

* gender -- пол респондента

* weight.before -- вес респондента до праздников

* weight.after -- вес респондентов после праздников

* rtype -- тип отдыха во время новогодних праздников (active, non-active)

* score -- оценка, на которую респондент оценил свои каникулы (1 -- очень плохо, 5 -- отлично)

Сохраните базу данных в переменную *df* (можно в другую, но далее в заданиях далее она будет называться так, будьте внимательны).


**Задание 1: векторы и матрицы**

Выберите из базы данных столбец *weight.before*, сохраните его в вектор *w*. Выберите из базы данных столбец *gender*, сохраните его в вектор *g*.

Ответы на вопросы этого задания должны быть даны на основе векторов *w*, *g* -- обращаться к самой базе данных нельзя!

1. Сколько в базе данных респондентов, вес которых был не меньше 50 кг, но не больше 70 кг? Приведите код и напишите ответ в виде комментария.

2. Определите, сколько в базе данных респондентов женского и мужского пола (ожидается единая выдача R для всех оценок)?

3. Выберите из вектора *g* значения, соответствующие женскому полу, и сохраните их индексы (!) в вектор *females*. 

4. Используя вектор *g*, создайте числовой вектор *g_num*, состоящий из 0 и 1, где 0 соответствует женскому полу, а 1 -- мужскому.


**Задание 2. Базы данных и dplyr.**

1. Добавьте в базу данных (с помощью dplyr):

     * столбец *weight.diff* -- разница между весом после праздников и весом до праздников

     * столбец *status*, содержащий следующие значения в зависимости от значений *weight.diff*:

        - weight.diff > 0, то status = "not ok"

        - weight.diff <= 0, то status = "ok"

2. Отфильтруйте (с помощью dplyr) строки в базе: выберите респондентов мужского пола, которые активно провели новогодние праздники (*active*) и сохраните их (!) в новую базу данных *active_male*.

3. Сколько переменных и наблюдений в базе данных *active_male*? 

4. Определите тип переменных *score*, *rtype*, *weight.diff*. Определите шкалы этих переменных (содержательный вопрос, R не нужен, напишите комментарием).

5. Есть ли в базе данных *df* пропущенные значения? Сколько строк, содержащих пропущенные значения, в этой базе данных?

6. Постройте графики, которые позволят вам определить паттерны пропущенных значений. Наблюдается ли какая-то закономерность в пропущенных значениях или пропуски носят "случайный" характер? Напишите ответ в виде комментария.

7. Удалите из базы *df* пропущенные значения.

**Задание 3. Описательные статистики и dplyr.**

*Используйте dplyr для ответа на вопросы этого задания.*

1. Сколько в базе данных респондентов, которые оценили свой отдых на 1, 2, 3, 4, 5? 

2. Респонденты какого типа (в зависимости от того, какой отдых они предпочли, активный или неактивный), в среднем, оценили свой отдых выше? При ответе на вопрос подумате, какую меру центральной тенденции тут лучше выбрать: среднее арифметическое, медиану или моду. Обоснуйте свой ответ.   

3. Кто (по максимальному значению) набрал больше веса после праздников: мужчины или женщины?

4. Выведите на экран первые 10 строк в базе данных, отсортированных по убыванию по переменной *score*. А теперь последние 10.


**Задание 4. Визуализация и анализ данных.**

1. Постройте ящик с усами (необязательно с ggplot2) для показателя *weight.after*. Добавьте заголовок и поменяйте цвет графика. Есть ли в выборке значений *weight.after* нетипичные наблюдения (выбросы)? Обоснуйте свой ответ.

2. Постройте график, который показывал бы связь между переменными *weight.after* и *score*. Выберите подходящий коэффициент корреляции, посчитайте его для этой пары переменных. Проверьте его значимость. Сделайте статистический и содержательный вывод.

3. Постройте график, который бы показывал распределение значений показателя *gender*. Не забудьте подписать оси и дать название графику. Судя по этому графику, кого в базе данных больше, мужчин или женщин? 

**Задание 5. Графики с ggplot2.**

Постройте скрипичные диаграммы (*violin plots*) для переменной *weight.diff* по группам (по типу отдыха респондентов): одну диаграмму для каждой группы, причем диаграммы должны быть в разных окнах ("фасетках") в пределах одного графика. Не забудьте заголовок для графика. Поменяйте цвета.


**Задание 6. Условия, циклы и функции.**

1. Напишите функцию, которая принимает на вход (просто, не запрашивая у пользователя с клавиатуры) возраст человека, и если человек младше 18 лет, то выводит на экран сообщение "Этот человек не может голосовать", иначе -- сообщение "Этот человек может голосовать".

2. Напишите функцию, которая запрашивает у пользователя с клавиатуры число и месяц его рождения через пробел (например, "20 2" для 20 февраля) и

* выводит на экран сообщение "Ваш день рождения раньше, чем день рождения Вышки.", или "Ваш день рождения позже, чем день рождения Вышки.", или "Вы родились в один месяц с Вышкой!"

* не только выводит сообщение на экран, но и возвращает его (сам текст сообщения)

День рождения Вышки -- 27 ноября.
