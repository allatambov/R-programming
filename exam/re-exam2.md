
## Экзамен

Для выполнения экзаменационной работы Вам потребуется загрузить базу данных *holidays.csv* -- результаты выдуманного опроса респондентов после новогодних праздников. 

Переменные в базе данных:

* gender -- пол респондента

* weight.before -- вес респондента до праздников

* weight.after -- вес респондентов после праздников

* rtype -- тип отдыха во время новогодних праздников (active, non-active)

* score -- оценка, на которую респондент оценил свои каникулы (1 -- очень плохо, 5 -- отлично)

Сохраните базу данных в переменную *df* (можно в другую, но далее в заданиях далее она будет называться так, будьте внимательны).


**Задание 1: векторы и матрицы**

Выберите из базы данных столбец *weight.before*, сохраните его в вектор *w*. Выберите из базы данных столбец *rest*, сохраните его в вектор *re*.

Ответы на вопросы этого задания должны быть даны на основе векторов *w*, *re* -- обращаться к самой базе данных нельзя!

1. Сколько в базе данных респондентов, вес которых был не меньше 50 кг и при этом представлял собой круглое число (делится на 10 без остатка)? Приведите код и напишите ответ в виде комментария.

2. Определите, сколько в базе данных респондентов, предпочитающих активный и неактивный отдых (ожидается единая выдача R для всех оценок)?

3. Выберите из вектора *re* значения, соответствующие респондентам, предпочитающим активный вид отдыха и сохраните их индексы (!) в вектор *active*. 

4. Используя вектор *re*, создайте факторный вектор *re_num*, состоящий из 1 и 2, где 1 соответствует активному отдыху, а 2 -- неактивному.


**Задание 2. Базы данных и dplyr.**

1. Добавьте в базу данных (с помощью dplyr):

     * столбец *weight.diff* -- разница между весом после праздников и весом до праздников

     * столбец *status*, содержащий следующие значения в зависимости от значений *weight.diff*:

        - weight.diff > 0, то status = "not ok"

        - weight.diff <= 0, то status = "ok"

2. Отфильтруйте (с помощью dplyr) строки в базе: выберите респондентов женского пола, которые оценили свой отдых на 2 или 3 и сохраните их (!) в новую базу данных *females_23*.

3. Сколько переменных и наблюдений в базе данных *females_23*? 

4. Определите тип переменных *score*, *gender*, *weight.diff*. Определите шкалы этих переменных (содержательный вопрос, R не нужен, напишите комментарием).

5. Есть ли в базе данных *df* пропущенные значения? Сколько строк, содержащих пропущенные значения, в этой базе данных?

6. Постройте графики, которые позволят вам определить паттерны пропущенных значений. Наблюдается ли какая-то закономерность в пропущенных значениях или пропуски носят "случайный" характер? Напишите ответ в виде комментария.

7. Удалите из базы *df* пропущенные значения.

**Задание 3. Описательные статистики и dplyr.**

*Используйте dplyr для ответа на вопросы этого задания.*

1. Сколько в базе данных респондентов, которые провели свой отдых активно или неактивно? 

2. Респонденты какого пола, в среднем, оценили свой отдых выше? При ответе на вопрос подумате, какую меру центральной тенденции тут лучше выбрать: среднее арифметическое, медиану или моду. Обоснуйте свой ответ.   

3. Кто, в среднем, набрал больше веса после праздников: "активные" или "неактивные"?

4. Выведите на экран первые 4 строки в базе данных, отсортированных по убыванию по переменной *weight.before*. А теперь последние 4.


**Задание 4. Визуализация и анализ данных.**

1. Постройте столбчатую диаграмму (необязательно с ggplot2) для показателя *rtype*. Добавьте заголовок и поменяйте цвет графика. Объясните, что показывает этот график.

2. Постройте график, который показывал бы связь между переменными *weight.before* и *score*. Выберите подходящий коэффициент корреляции, посчитайте его для этой пары переменных. Проверьте его значимость. Сделайте статистический и содержательный вывод.

3. Постройте график, который бы показывал распределение значений показателя *weight.diff*. Не забудьте подписать оси и дать название графику. Судя по этому графику, сколько килограммов люди набирали за праздники чаще всего (примерно)? 

**Задание 5. Графики с ggplot2.**

Постройте графики плотности распределения (*density plots*) для переменной *weight.diff* по группам (по типу отдыха респондентов): одну диаграмму для каждой группы, причем диаграммы должны быть в одном окне ("фасетке") в пределах одного графика. Не забудьте заголовок для графика. Поменяйте цвета. Добавьте "rugs" (засечки, соответствующие наблюдениям).


**Задание 6. Условия, циклы и функции.**

1. Напишите функцию, которая принимает на вход (просто, не запрашивая у пользователя с клавиатуры) возраст человека, и если человек младше 18 лет, то выводит на экран сообщение "Этот человек не может голосовать", иначе -- сообщение "Этот человек может голосовать".

2. Напишите функцию, которая запрашивает у пользователя с клавиатуры число и месяц его рождения через пробел (например, "20 2" для 20 февраля) и

* выводит на экран сообщение "Ваш день рождения раньше, чем день рождения Вышки.", или "Ваш день рождения позже, чем день рождения Вышки.", или "Вы родились в один месяц с Вышкой!"

* не только выводит сообщение на экран, но и возвращает его (сам текст сообщения)

День рождения Вышки -- 27 ноября.
